<!doctype html>
<html>
    <head>
        <meta charset='utf-8'>
        <title>hex.js / examples / animated canvas</title>
        <link rel="stylesheet" type="text/css" href="example.css">
    </head>
    <body>
        <script type="text/javascript" src="/hex.js"></script>
        <pre id="code-show"></pre>
        <div style="text-align: center;">
            <canvas id="grid"></canvas>
        </div>
        <script id="code">
            var canvas = document.getElementById('grid');
            
            var grid = new hex.CanvasHexagonalGrid(canvas, {
                radius: 5,
                renderNode: function(node, data) {
                    if(data.colour === undefined) {
                        data.colour = randomColour();
                    }
                    var hR = this.nodeRadius;
                    var position = node.to_cartesian(hR);
                    position.x += this.canvas.width / 2.0;
                    position.y += this.canvas.height / 2.0;
                    var h = (data.colour[0] + 360 * performance.now() / 5000.0) % 360.0;
                    var s = (data.colour[1] + 100 * performance.now() / 5000.0) % 100.0;
                    var l = (data.colour[2] + 100 * performance.now() / 5000.0) % 100.0;
                    var col = 'hsl(' + h + ',' + s + '%,' + l + '%)';
                    this.ctx.fillStyle = col;
                    this.ctx.strokeStyle = 'rgba(0,0,0,1)';
                    this.ctx.beginPath();
                    this.ctx.arc(position.x, position.y, hR * 0.2, 0, 2 * Math.PI);
                    this.ctx.closePath();
                    this.ctx.fill();
                    hex.grid.canvas.strokeHexagon(this.ctx, position.x, position.y, hR);
                }
            });

            function randomColour() {
                var h = 360 * Math.random();
                var s = 100 * Math.random();
                var l = 100 * Math.random();
                return [h, s, l];
            }

            grid.animate();
        </script>
        <script>
            document.getElementById('code-show').innerHTML = document.getElementById('code').innerHTML;
        </script>
    </body>
</html>
